# CLAUDE.md 작성 지침

> 논문 기반 실증 가이드라인
> - SkillsBench: Benchmarking How Well Agent Skills Work Across Diverse Tasks (arXiv 2602.12670)
> - Evaluating AGENTS.md: Are Repository-Level Context Files Helpful for Coding Agents? (arXiv 2602.11988)

---

## 핵심 원칙

**인간이 직접 작성한, 짧고 집중적인, 코드에서 추론 불가능한 정보만 담아라.**

- 큐레이션된 지침: 평균 **+4~16%** 성능 향상
- LLM이 자동 생성한 지침: 평균 **-3%** + 추론 비용 **20% 증가**
- 최적 분량: **2~3개 집중 모듈** > 광범위한 문서

---

## 기록해야 할 것 ✅

### 1. 코드에서 추론 불가능한 도메인 지식
```
- 배포는 금요일 오후 금지 (팀 운영 규칙)
- 이 DB는 UTC+9 기준, datetime은 항상 KST로 저장
- 외부 API 호출 시 반드시 rate limit 고려 (분당 60회)
```

### 2. 프로젝트 고유의 커맨드/워크플로우
```
- 테스트: pytest -x --no-header -q
- 린트: ruff check . && mypy src/
- 절대 npm run build는 로컬에서 실행하지 말 것 (CI 전용)
```

### 3. 금지 사항 (안티패턴)
```
- DB 마이그레이션 자동 실행 금지 → 반드시 수동 확인
- secrets는 절대 코드에 하드코딩 금지
- main 브랜치 직접 push 금지
```

### 4. 경로 매핑 및 역할 정의
```
- auth → ~/projects/auth/
- 머리 = Claude Code, 손 = 서브에이전트
```

### 5. 아키텍처 결정과 이유
```
- ORM 사용 안 함 (성능 이유로 raw SQL 선택)
- 상태 관리는 Redux 금지, Zustand만 사용
```

---

## 기록하지 말아야 할 것 ❌

### 1. 모델이 이미 아는 일반적 베스트 프랙티스
```
❌ "항상 에러 핸들링을 해라"
❌ "코드에 주석을 달아라"
❌ "보안에 주의해라"
```
→ 모델은 이미 알고 있음. 노이즈만 추가됨.

### 2. 코드베이스를 읽으면 알 수 있는 내용
```
❌ "이 프로젝트는 Python을 사용합니다" (requirements.txt로 알 수 있음)
❌ "FastAPI 기반입니다" (main.py 보면 앎)
❌ "파일 구조는 src/로 구성됩니다"
```

### 3. LLM이 자동 생성한 내용
```
❌ AI가 요약해준 README 내용을 그대로 붙여넣기
❌ "이 파일들이 있습니다: ..." 식의 디렉토리 나열
```
→ 성능 오히려 감소 + 비용 증가

### 4. 모호하고 측정 불가능한 지침
```
❌ "항상 친절하게 답변해줘"
❌ "코드를 깔끔하게 작성해줘"
❌ "사용자 경험을 고려해줘"
```

### 5. 장황한 설명
```
❌ 한 항목에 3줄 이상의 설명
❌ 배경 스토리 ("우리가 이걸 선택한 이유는 2022년에...")
❌ 가상의 시나리오 대비 규칙
```

---

## 분량 기준

| 항목 | 권장 |
|------|------|
| 전체 분량 | 100~200줄 이내 |
| 모듈 수 | 2~3개 집중 섹션 |
| 항목당 설명 | 1줄 (최대 2줄) |
| 업데이트 주기 | 실제 실패 사례 발생 시에만 추가 |

---

## 업데이트 원칙

> "실패한 경험에서만 추가하라"

- 에이전트가 실수한 것 → 규칙 추가 ✅
- "혹시 모르니까" → 추가하지 않음 ❌
- 추가할 때마다 기존 항목 중 삭제 가능한 것 검토

---

## 자가 점검 체크리스트

작성 후 각 항목에 대해:

- [ ] 코드를 읽으면 알 수 있는 내용인가? → 삭제
- [ ] 일반적 베스트 프랙티스인가? → 삭제
- [ ] LLM이 생성했는가? → 삭제
- [ ] 1줄로 표현 가능한가? → 2줄 이상이면 압축
- [ ] 실제 실패 경험 기반인가? → 아니면 재검토

---

## 참고 논문

| 논문 | 핵심 수치 |
|------|-----------|
| SkillsBench (2602.12670) | 큐레이션 스킬 +16.2%p, 자동생성 효과없음, 2~3모듈 최적 |
| AGENTS.md eval (2602.11988) | 인간작성 +4%, LLM생성 -3%, 비용 20%↑ |
