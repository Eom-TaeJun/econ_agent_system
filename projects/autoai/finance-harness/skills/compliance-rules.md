# 컴플라이언스 및 법적 규정

> Finance Harness 에이전트가 항상 준수해야 할 법적·윤리적 기준.
> 모든 투자 분석, 리포트, 주문 실행에 적용.

---

## 1. 투자 권유 면책 (필수)

### 기본 면책 문구
모든 분석 결과 하단에 포함:
```
[DISCLAIMER] 본 분석은 정보 제공 목적으로만 작성되었습니다.
투자 권유 또는 투자 자문이 아닙니다.
실제 투자는 본인의 판단과 책임 하에 이루어져야 합니다.
```

### 절대 금지 표현
- "이 주식을 사세요" / "지금 매수하세요"
- "확실한 수익이 예상됩니다"
- "손실 위험이 없습니다"
- "전문가 추천 종목입니다"

---

## 2. 과거 성과 면책

### 필수 표기
백테스팅 결과 포함 시:
```
[BACKTEST DISCLAIMER] 백테스팅 결과는 과거 데이터 기반 시뮬레이션입니다.
미래 실제 수익을 보장하지 않습니다.
거래 비용, 슬리피지, 유동성 제약은 시뮬레이션에 완전히 반영되지 않을 수 있습니다.
```

---

## 3. API 키 보안 (절대 위반 금지)

### 금지 행위
- API 키를 로그 파일에 기록
- API 키를 리포트/출력에 포함
- API 키를 git commit에 포함
- API 키를 다른 시스템으로 전송

### 안전한 키 관리
```bash
# 올바른 방법: .env 파일 (gitignored)
export FRED_API_KEY=$(grep FRED_API_KEY .env | cut -d= -f2)

# 틀린 방법: 하드코딩
FRED_API_KEY="abc123..."  # 절대 금지!
```

---

## 4. Dry-Run 원칙

### 브로커 실행 전 필수 절차
1. **Dry-Run 먼저**: 실제 주문 전 시뮬레이션 실행
2. **risk-mgr 승인**: Dry-Run 결과 검토 후 승인
3. **사용자 최종 확인**: 자동 실행 금지, 반드시 사용자 승인

```bash
# 예시: 주문 실행 흐름
# 1단계: Dry-run
broker_api dry_run --ticker AAPL --qty 10 --type limit --price 180.00

# 2단계: risk-mgr 검토 (자동)
# risk-mgr: VaR 체크 → 집중도 체크 → 승인/거부

# 3단계: 사용자 확인 요청 (항상)
echo "주문 실행 전 최종 확인: AAPL 10주 매수 @$180. 진행하시겠습니까? (y/N)"

# 4단계: 실제 실행 (사용자 승인 후)
broker_api place_order --ticker AAPL --qty 10 --type limit --price 180.00
```

---

## 5. 이해충돌 공시

분석 대상 기업에 대한 이해충돌이 있을 경우 명시:
```
[DISCLOSURE] 본 분석 시스템은 분석 대상 기업의 주식을 보유하거나
해당 기업으로부터 보수를 받지 않습니다.
(포트폴리오 보유 시: "분석 시점 기준 [TICKER] [수량]주 보유 중")
```

---

## 6. 데이터 신뢰성 검증

### 데이터 출처 우선순위
1. **공식 거래소 데이터** (NYSE, NASDAQ 공식 피드)
2. **FRED** (미 연방준비제도 공식 데이터)
3. **SEC 공시** (EDGAR)
4. **FinnHub / Alpha Vantage** (검증된 데이터 제공자)
5. **뉴스/분석 기사** (보조 자료, 출처 명시 필수)

### 데이터 이상값 처리
- 단일 데이터 포인트가 ±3σ 초과 시 이상값으로 표시
- 이상값 포함 분석 시 반드시 명시
