{
  "description": "금융 분석 하니스 가드레일: 스킬 자동 활성화 + 데이터 검증 + 분석 완성도 보장 + 컨텍스트 로드",
  "hooks": {

    "UserPromptSubmit": [
      {
        "matcher": "*",
        "hooks": [
          {
            "type": "command",
            "command": "node ${CLAUDE_PLUGIN_ROOT}/hooks/scripts/skill-activation-prompt.mjs",
            "timeout": 5
          }
        ]
      }
    ],

    "SessionStart": [
      {
        "matcher": "*",
        "hooks": [
          {
            "type": "command",
            "command": "bash ${CLAUDE_PLUGIN_ROOT}/hooks/scripts/load-market-context.sh",
            "timeout": 15
          }
        ]
      }
    ],

    "PreToolUse": [
      {
        "matcher": "Write|Edit",
        "hooks": [
          {
            "type": "prompt",
            "prompt": "파일 쓰기 작업 검증: (1) API 키, 토큰, 패스워드 등 민감 정보가 하드코딩되어 있는가? (2) outputs/ 이외의 경로에 분석 결과를 저장하려 하는가? (3) 기존 리포트를 덮어쓰는가? 문제없으면 'approve', 위험하면 'deny'와 이유를 반환하라.",
            "timeout": 20
          }
        ]
      },
      {
        "matcher": "Bash",
        "hooks": [
          {
            "type": "command",
            "command": "bash ${CLAUDE_PLUGIN_ROOT}/hooks/scripts/validate-bash.sh",
            "timeout": 10
          }
        ]
      }
    ],

    "PostToolUse": [
      {
        "matcher": "Bash",
        "hooks": [
          {
            "type": "prompt",
            "prompt": "코드 실행 결과를 확인하라: 에러가 발생했는가? 경고(Warning)가 있는가? 데이터 수집에 실패했는가? 문제가 있으면 다음 단계 진행 전에 Claude에게 알려라.",
            "timeout": 20
          }
        ]
      }
    ],

    "Stop": [
      {
        "matcher": "*",
        "hooks": [
          {
            "type": "prompt",
            "prompt": "분석 작업 완료 여부를 검증하라: (1) 사용자가 요청한 모든 지표가 분석되었는가? (2) 데이터 검증(data-validator)이 수행되었는가? (3) 결론에 수치 근거가 있는가? (4) 리포트가 파일로 저장되었는가? 모두 충족되면 'approve', 미완료 항목이 있으면 'block'과 미완료 항목 목록을 반환하라.",
            "timeout": 30
          }
        ]
      }
    ],

    "PreCompact": [
      {
        "matcher": "*",
        "hooks": [
          {
            "type": "prompt",
            "prompt": "컨텍스트 압축 전 보존 정보를 systemMessage에 요약하라: (1) 완료된 분석 단계, (2) 핵심 수치 결론(레짐, 스프레드 수준 등), (3) 다음 수행할 작업, (4) 아직 미완료인 항목. 압축 후에도 분석 연속성이 유지되도록 하라.",
            "timeout": 30
          }
        ]
      }
    ]

  }
}
